<div class="fixed inset-0 -z-10 animate-gradient-red-black"></div>

@if (loading()) {
  <div class="fixed inset-0 flex flex-col items-center justify-center bg-black/60 z-50">
    <div class="w-16 h-16 border-4 border-red-900 border-t-transparent rounded-full animate-spin mb-4"></div>
    <p class="text-white text-xl font-semibold tracking-wide animate-pulse">
      Cargando tu experiencia...
    </p>
  </div>
} @else {
  <!-- Contenido principal -->

  <!-- SIDEBAR -->
  <aside class="navbar">
    <a routerLink="/home/inicio" class="text-2xl font-bold text-white">Portafolio</a>

    <nav class="mt-8 flex flex-col space-y-2">
      <a routerLink="/home/inicio" routerLinkActive="active" class="nav-link">Inicio</a>
      <a routerLink="/home/proyectos" routerLinkActive="active" class="nav-link">Proyectos</a>

      @if (role === 'admin') {
        <div class="relative group">
          <button class="nav-link flex items-center justify-between">Panel de control â–¼</button>
          <div class="absolute left-full top-0 hidden group-hover:block bg-black/80 text-white rounded-lg shadow-xl py-2 w-56">
            <a routerLink="/home/admin" [routerLinkActive]="['active']" class="submenu-item">
              Registrar Programador
            </a>
          </div>
        </div>
      }

      @if (role === 'programmer') {
        <div class="relative group">
          <button class="nav-link flex items-center justify-between">Programador â–¼</button>
          <div class="absolute left-full top-0 hidden group-hover:block bg-black/80 text-white rounded-lg shadow-xl py-2 w-56">
            <a routerLink="/home/programmer/management" class="submenu-item">Mis proyectos</a>
            <a routerLink="/home/programmer" class="submenu-item">Solicitudes</a>
          </div>
        </div>
      }

      @if (role === 'user') {
        <span class="nav-link">Explorar contenido</span>
      }
    </nav>

    <div class="mt-auto flex flex-col items-center space-y-3">
      @if (authService.currentUser()) {
        <div class="user-initials">{{ getInitials(authService.currentUser()?.email ?? '') }}</div>
        <button (click)="logout()" class="bg-red-900 text-white px-3 py-1 rounded hover:bg-red-700 transition transform hover:scale-105">
          Cerrar sesiÃ³n
        </button>
      } @else {
        <button routerLink="/login" class="bg-red-900 text-white px-3 py-1 rounded hover:bg-red-700 transition transform hover:scale-105">
          Iniciar sesiÃ³n
        </button>
      }
    </div>
  </aside>

  <!-- HERO / CONTENIDO PRINCIPAL -->
  <main class="hero-slide p-6">
    <h2 class="text-4xl md:text-5xl font-bold text-white animate-fadeIn mb-6">
      @if (role === 'user' || role === 'programmer' || role === 'admin') {
        Â¡Bienvenido!
      }
    </h2>




    <router-outlet></router-outlet>
<!-- CTA â€“ SOLICITAR ASESORÃA -->
<div class="relative overflow-hidden mt-12 p-8 rounded-2xl bg-linear-to-br from-yellow-400 via-yellow-300 to-yellow-500 shadow-2xl animate-fadeIn">

  <!-- DecoraciÃ³n circulos -->
  <div class="absolute -top-10 -right-10 w-40 h-40 bg-white/30 rounded-full blur-2xl"></div>
  <div class="absolute -bottom-12 -left-12 w-48 h-48 bg-white/20 rounded-full blur-3xl"></div>

  <!-- Contenido -->
  <div class="relative z-10 text-black">
    <h3 class="text-3xl font-extrabold drop-shadow-lg">
      Â¿Necesitas asesorÃ­a personalizada?
    </h3>

    <p class="mt-2 text-lg opacity-90">
      Conecta con expertos que pueden ayudarte a impulsar tu proyecto.
    </p>

    <button
      (click)="openAsesoria()"
      class="mt-6 px-8 py-3 bg-black text-yellow-300 font-bold rounded-xl shadow-xl
             hover:bg-gray-900 hover:scale-105 hover:shadow-2xl transition-all duration-300 flex items-center gap-2">

      <span class="animate-pulse text-xl">ðŸ’¬</span>
      Solicitar AsesorÃ­a
    </button>
  </div>
</div>
  
  </main>

  <!-- FOOTER -->
  <footer class="bg-white/80 backdrop-blur-md mt-auto shadow-inner py-4 text-center text-gray-500 animate-fadeIn">
    Â© 2025 MiApp. Todos los derechos reservados.
  </footer>
}
