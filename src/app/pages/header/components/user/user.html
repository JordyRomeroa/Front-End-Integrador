@if (role() === 'user') {
  <div class="bg-gradient-to-br from-white/60 to-white/30 p-8 rounded-xl shadow-2xl space-y-5 backdrop-blur-md border border-white/40">
    <h3 class="text-3xl font-extrabold mb-4 text-gray-900 drop-shadow-sm border-b pb-3">Solicitar Asesoría Personalizada</h3>

    <div>
      <label class="block mb-2 text-sm font-medium text-gray-700">Programador:</label>
      @if (programadores().length > 0) {
        <select
          [(ngModel)]="programadorId"
          class="w-full mb-4 p-3 rounded-lg text-gray-800 bg-white border border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 transition-all">
          @for (prog of programadores(); track prog.uid) {
            <option [value]="prog.uid">
              {{ prog.nombre }} ({{ prog.especialidad }})
            </option>
          }
        </select>
      } @else {
        <p class="text-sm text-yellow-700 bg-yellow-100 p-3 rounded-lg">
          No hay programadores disponibles para solicitar asesoría en este momento.
        </p>
      }
    </div>

    <div>
      <label class="block mb-2 text-sm font-medium text-gray-700">Mensaje para el Programador:</label>
      <textarea
        [(ngModel)]="mensaje"
        placeholder="Escribe tu mensaje, describe tu proyecto y tus dudas..."
        rows="4"
        class="w-full mb-4 p-3 rounded-lg text-gray-800 bg-white border border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 transition-all"></textarea>
    </div>

    <div>
      <label class="block mb-2 text-sm font-medium text-gray-700">Fecha y Hora de Asesoría Sugerida:</label>
      <input
        type="datetime-local"
        [(ngModel)]="fecha"
        class="w-full mb-4 p-3 rounded-lg text-gray-800 bg-white border border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 transition-all" />
    </div>

    <button
      (click)="enviarAsesoria()"
      class="w-full inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform transition-transform hover:scale-[1.01] disabled:bg-indigo-400">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor">
        <path d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2V7a5 5 0 00-5-5zm-3 7v2h6V9H7z" />
      </svg>
      Enviar Solicitud
    </button>
  </div>

  @if (dialogVisible()) {
    <div class="fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn">
      <div class="bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full animate-fade-in-up">

        <div class="flex items-center space-x-4 mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <p class="text-xl font-semibold text-gray-800">Mensaje del Sistema</p>
        </div>

        <p class="text-gray-600 mb-6">{{ dialogMessage() }}</p>

        <button
          (click)="closeDialog()"
          class="w-full inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition">
          Entendido
        </button>
      </div>
    </div>
  }
}
